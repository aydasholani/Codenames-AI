{% extends 'base.html' %}

{% block title %}
  Upload Image
{% endblock %}
{%block head%}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<link rel="stylesheet" href="{{ url_for('static', filename='game.css') }}">

{%endblock%}
{% block content %}
  <div class="board">
    <form id="uploadForm" enctype="multipart/form-data" onsubmit="event.preventDefault(); uploadImage();">
      <input class="hidden-file-input" type="file" name="file" id="fileInput" accept="image/*" onchange="updateFileName()">
  
      <button type="button" onclick="document.getElementById('fileInput').click();" class="btn btn-secondary">Choose File</button>
      <span id="fileName" style="margin-left: 10px; color: white;">No file chosen</span>

      <button type="submit" class="btn btn-primary" style="margin-left: 10px;">Upload and Detect</button>
    </form>
    <button id="loadingButton" class="btn btn-secondary d-none" type="button">
        <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
        Loading...
    </button>

    <!-- Visningsområde för felmeddelanden och dynamisk grid -->
    <div id="results">
        {% if error %}
            <p class="text-danger">{{ error }}</p>
        {% endif %}


        {% from "macros/_game_grid.html" import game_grid with context %} 
        {% if words_with_colors %}
          {{ game_grid(words_with_colors) }}
        {% endif %}
    </div>
  </div>
  <script src="{{ url_for('static', filename='game.js') }}"></script>
{% endblock %}
